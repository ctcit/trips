<form name="tripForm" ng-controller="showTripController as controller" novalidate>
    <div class="container">
        <div class="noprint">
            <div>
                <button ui-sref="trip.showAllTrips">
                    <img src="app/assets/ctc.png" />All Trips
                </button>
                <button ng-disabled="!controller.saveEnabled()" ng-click="controller.save(false)">
                    <img src="app/assets/save.png" />Save
                </button>
                <button ng-disabled="controller.Undo.length == 0" ng-click="controller.undoAction('Undo','Redo')" ng-attr-title="{{controller.undoTitle('Undo')}}">
                    <img src="app/assets/undo.png" />Undo
                </button>
                <button ng-disabled="controller.Redo.length == 0" ng-click="controller.undoAction('Redo','Undo')" ng-attr-title="{{controller.undoTitle('Redo')}}">
                    <img src="app/assets/redo.png" />Redo
                </button>
                <img ng-show="controller.savestate == 'Saving'" src="app/assets/waiting.gif" />
                <span ng-bind="controller.savestate"></span>
                <span ng-bind="controller.diffString()"></span>
            </div>
            <div class="error" style="white-space: nowrap" ng-repeat="warning in controller.warnings" ng-bind="warning">
            </div>
        </div>

        <show-detail showdetail="controller.showdetail"
                     tripeditable="controller.tripeditable"
                     trip-detail="controller.trip.tripDetail"
                     original-trip-detail="controller.originalState.tripDetail"
                     highlights="controller.highlights"
                     update="controller.update()">
        </show-detail>

        <show-participants showparticipants="controller.showparticipants"
                           tripeditable="controller.tripeditable"
                           trip-is-open="controller.trip.tripDetail.isOpen"
                           participants="controller.trip.participants"
                           nonmembers="controller.trip.nonmembers"
                           original-participants="controller.originalState.participants"
                           highlights="controller.highlights"
                           update="controller.update()">
        </show-participants>

        <show-description showdescription="controller.showdescription"
                          trip="controller.trip.tripDetail">
        </show-description>

        <show-trip-email showtripemail="controller.showtripemail"
                         email="controller.trip.tripEmail" 
                         tripeditable="controller.tripeditable"
                         savestate="controller.savestate" 
                         trip-form="controller.tripForm">
        </show-trip-email>

        <show-history showhistory="controller.showhistory"
                      changes="controller.editSession.changes"
                      highlights="controller.highlights">
        </show-history>

    </div>
</form>

